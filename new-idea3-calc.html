<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h1>Графики функций</h1>
    <div class="mb-3">
        <input id="maxX" type="number" class="form-control w-25 d-inline me-2" value="5" min="1" max="20">
        <button onclick="draw()" class="btn btn-primary">Обновить</button>
    </div>
    <canvas id="chart" width="600" height="600" class="border"></canvas>

    <script>
    let chart;
    
    function draw() {
        const maxX = parseInt(document.getElementById('maxX').value);
        
        // Генерируем точки от -maxX до +maxX
        const points = [];
        for(let x = -maxX; x <= maxX; x++) {
            points.push({
                x: x,
                x2: x*x,
                x3: x*x*x,
                sqrtX: x >= 0 ? Math.sqrt(x) : null,
                sinX: Math.sin(x * Math.PI / 4) // Частота sin поменьше
            });
        }
        
        const ctx = document.getElementById('chart').getContext('2d');
        if(chart) chart.destroy();
        
        chart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [
                    { label: 'x²', data: points.map(p => ({x: p.x, y: p.x2})), borderColor: 'red', tension: 0.1 },
                    { label: 'x³', data: points.map(p => ({x: p.x, y: p.x3})), borderColor: 'blue', tension: 0.1 },
                    { label: '√x', data: points.map(p => ({x: p.x, y: p.sqrtX})), borderColor: 'green', borderDash: [5,5] },
                    { label: 'sin(x)', data: points.map(p => ({x: p.x, y: p.sinX})), borderColor: 'purple' }
                ]
            },
            options: {
                responsive: false,
                scales: {
                    x: { 
                        type: 'linear', 
                        position: 'bottom',
                        min: -maxX, 
                        max: maxX,
                        grid: { color: ctx => ctx.tick.value === 0 ? 'black' : '#eee' }
                    },
                    y: { 
                        min: -maxX, 
                        max: maxX,
                        grid: { color: ctx => ctx.tick.value === 0 ? 'black' : '#eee' }
                    }
                }
            }
        });
    }
    
    // Запуск при загрузке
    draw();
    </script>
</body>
</html>
